## 进程
在多道程序系统中，进程是一个具有独立功能的程序关于某个数据集合的一次动态执行过程，是操作系统进行资源分配和调度的基本单位，是应用程序运行的载体。

## 线程
线程则是程序执行过程中一个单一的顺序控制流程，是 CPU 调度和分派的基本单位。线程是比进程更小的独立运行基本单位，一个进程中可以拥有一个或者以上的线程，这些线程共享进程所持有的资源，在 CPU 中被调度执行，共同完成进程的执行任务。

> 在 Linux 系统中，根据资源访问权限的不同，操作系统会把内存空间分为内核空间和用户空间：内核空间的代码能够直接访问计算机的底层资源，如 CPU 资源、I/O 资源等，为用户空间的代码提供计算机底层资源访问能力；用户空间为上层应用程序的活动空间，无法直接访问计算机底层资源，需要借助“系统调用”“库函数”等方式调用内核空间提供的资源。
> 
> 同样，线程也可以分为内核线程和用户线程。内核线程由操作系统管理和调度，是内核调度实体，它能够直接操作计算机底层资源，可以充分利用 CPU 多核并行计算的优势，但是线程切换时需要 CPU 切换到内核态，存在一定的开销，可创建的线程数量也受到操作系统的限制。用户线程由用户空间的代码创建、管理和调度，无法被操作系统感知。用户线程的数据保存在用户空间中，切换时无须切换到内核态，切换开销小且高效，可创建的线程数量理论上只与内存大小相关。

## 协程
一种用户线程，属于轻量级线程。
* 协程的调度，完全由用户空间的代码控制；
* 协程有自己的寄存器上下文 和 栈，并存储在用户空间；
* 协程切换时无须切换到内核态访问内核空间，切换速度极快；
* 不过，麻烦的是：开发人员需要在用户空间处理协程切换时上下文信息的保存和恢复、栈空间大小的管理等问题；



## MPG 模型
一种特殊的两级线程模型。

* M：machine
  * 相当于内核线程在 Go线程 中的映射，它与内核线程一一对应，代表真正执行计算的资源。在M的生命周期内，它只会与一个内核线程关联；
* P：processor
  * 代表Go代码片段执行所需的上下文环境。M 和 P 结合能够为 G 提供有效的运行环境，他们之间的结合关系不是固定的。P的最大数量决定了 Go程序 的并发规模，由 runtime.GOMAXPROCS变量决定；
* G：goroutine
  * 轻量级用户线程，是对代码片段的封装，拥有执行时的栈、状态和代码片段等信息；
